<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order edit</title>
    <link rel="stylesheet" type="text/css" href="{% static 'order_edit.css' %}">
    <script type="text/javascript" src="{% static 'order_edit.js' %}"></script>
</head>
<body>
    {% if not ote.order.is_sent %}
    <div align="center">
        <button id="show_hide_search_result" class="hidden search_left_button" onclick="toggle_search_result()">Show/Hide</button>
        <input type="text" id="search_input" class="searchInput search_input_text" placeholder="Search keyword">
        <button id="search_button" class="search_right_button" onclick="search()" disabled="disabled">Search</button>
    </div>
    {% endif %}
    <div align="center" id="searchResults" class="hidden"></div>
    <form method="post" onsubmit="beforeSubmit()" enctype="multipart/form-data">
        <!--
        <div align="center">
            <input type="file" name="csv_excel" title="Import CSV/Excel">
        </div>
        -->
        <div class="error">{{ error_message|linebreaks }}</div>
        <table>
            <tr>
                <th>Order id:</th>
                <td><input class="textbox" type="text" name="order_id" value="{{ ote.order.id }}" readonly></td>
                <td rowspan="6" class="multiple-checkbox-holder">
                    <div class="item title"><b>Testers:</b></div>
                    {% for tester in ote.testers %}
                    <div class="item">
                        <input type="checkbox" name="tes" value="{{ tester.tester_name }}" class="chkbx blockableCheckbox"{% if tester.assigned %} checked{% endif %}{% if ote.order.is_sent %} disabled{% endif %}>
                        <div class="chkbx-title">'{{ tester.tester_name }}'</div>
                    </div>
                    {% endfor %}
                </td>
                <td rowspan="5">
                    <button type="submit"{% if ote.order.is_sent %} disabled{% endif %}>Submit</button>
                </td>
            </tr>
            </tr>
            <tr>
                <th>Creation date:</th>
                <td><input class="textbox" type="text" value='{{ ote.order.date|date:"c" }}' readonly></td>
            </tr>
            <tr>
                <th>Order name:</th>
                <td><input class="textbox blockable" name="order_name" type="text" value="{{ ote.order.name }}"{% if ote.order.is_sent %} readonly{% endif %}></td>
            </tr>
            <tr>
                <th>Client name:</th>
                <td><input class="textbox blockable" name="client_name" type="text" value="{{ ote.order.client }}"{% if ote.order.is_sent %} readonly{% endif %}></td>
            </tr>
            <tr>
                <th>Status:</th>
                <td><input class="textbox" type="text" value="{{ ote.order.get_status }}" readonly></td>
            </tr>
            {% if ote.order.is_ready %}
            <tr>
                <td colspan="2">
                    <div class="checkbox-wrapper">Set as sent <input class="checkbox" type="checkbox" name="set_as_sent" id="locker" onclick="disableElements(this)"{% if ote.order.is_sent %} checked disabled{% endif %}></div>
                </td>
            </tr>
            {% endif %}
        </table>
        <table class="mainTable">
            <thead>
                <tr>
                    <th>Nr</th>
                    <th>Serial</th>
                    <th>Manufacturer</th>
                    <th>Model</th>
                    <th>CPU</th>
                    <th>GPU</th>
                    <th>RAM</th>
                    <th>Other</th>
                    <th>Box number</th>
                    <th>Status</th>
                    <th colspan="2">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for computer in ote.computers %}
                <tr>
                    {{ ote.increment }}
                    <td>{{ ote.count }}</td>
                    <td>{{ computer.computer_serial }}</td>
                    <td>{{ computer.f_manufacturer.manufacturer_name }}</td>
                    <td>{{ computer.f_model.model_name }}</td>
                    <td>{{ computer.f_cpu.cpu_name }}</td>
                    <td>{{ computer.f_gpu.gpu_name }}</td>
                    <td>{{ computer.f_ram_size.ram_size_text }}</td>
                    <td>{{ computer.getOther2lines|linebreaksbr }}</td>
                    <td>{{ computer.get_box_number }}</td>
                    <td>
                        <select name="status_{{ computer.id_computer }}" class="blockableSelect"{% if ote.order.is_sent %} disabled{% endif %}>
                            <option value="In-Preperation"{% if computer.f_id_comp_ord.is_ready == 0 %} selected{% endif %}>In-Preperation</option>
                            <option value="Ready"{% if computer.f_id_comp_ord.is_ready == 1 %} selected{% endif %}>Ready</option>
                        </select>
                    </td>
                    <td>
                        <button title="Edit computer's record" class="img-button" type="button" onclick="edit({{ computer.id_computer }})">
                            <img
                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAy1JREFUSImV02tIU2EYB/D/2TnunDmmQxs4DQMrRMM1jTYjbQ6ipALDOB+rr/lFhCV+CcpYNyMManQvksAuil0U7GaJWCNRsqiG2SojdZaOdciz4+a7PsjEbe24PfB+Oe/7/P7PuVFIoCwWi1alUonR10VRpHp7e/1yvdRyeG1t7ZmVen1FCsf9jd5jGSYozs09tdlsJxIZNKYaGhqOtLe3zzudzlC86uzs/Fxpta6OZyjk8KqqqkMGgyHuGQBQKBQKkRDKarVWWywWJqGAMF5aWkrL4eGigfoQIddpmnYuG5As/qq/X5em1e6laTqdAjZYrdYRnucXeyMCksXtl9rwUr1Ds7liqyo9PX0BpKi109PTrrC9CMXDBUGA3+9HdnZ2JH7xHlpDlfibtgZfPAK25Wvw2zMBSZJAARm5ubmbTCZTKw0Adru9zmg0HsvLy6O9Xi/CSxAEDA8Po6SkBBzHRUzeGqoEUWqAyfcYTi3FR58Se/IV+O2ZwOzsrI+maXtXV9d7mud5pVqtvmYymXSiKGLpkiQJxcXF0Gq1i/jRC3dxewnuYotAhQioGTeGZlKxK58N/vzmbnrW0+MAAEYQBCorK2vKbDbnL/fMGx23cVexMwZPm3gNH7MC/nmaPBoYdQz09DSGe2S/8aV1JAJ/F4OzkpcUfL95dqDjct3SvoQCDp9vxb0I3BCDF461NL99cNEW3Rvz50WX484TtNG7FvCJd3BxkTgX9KHw2/UbQw+vHPxfv+wd/BgbAxv4A25u5r+4KujDfu6FT+MbORnPkA0YHBxEcUEejhsn8SukiZn8pHEcVeWGaTlDNuCTywVCCHQaJVrKp7DK83xx8lPGcdTu2y3XLh8wOjqKjx8+4OrVKwgEAshKU8KxQ41Vwa9o2uBJCAdkXnJfXx88Hg8IIXh4vwPriorg9Xpxq3o9ysrKEsJlA944ndDr9cjIzMRGsxlbysuRkZmZMLxswIGaGqzQ6ZCTk5M0GhOQwjCB6I31RmNCACGEsDL7FACca27eDoY56Pf7U5KZjmXZYECSHtvq60/LBgAAz/NKt9sdSiZAp9Mpuru7Jbkz/wAVAobVY0U2sQAAAABJRU5ErkJggg=="
                            />
                        </button>
                    </td>
                    <td>
                        {% if not ote.order.is_sent %}
                        <button title="Remove computer from the record" class="img-button" type="button" onclick="remove_from_order({{ computer.id_computer }})"{% if ote.order.is_sent %} disabled{% endif %}>
                            <img
                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAABX0lEQVR4Xu2UsUoDQRCG/5lsEiNqgqAE0ghqZWPhK9iIvYUvYGeljbX4CBbW0ca3EEXBRrBQNKA2CkKQU8To7Yyz3oVDk1KtbuDjv2Lv25+BO1JV/MVwjyAX52IaAMrbVV6ba9QmUSIUSwpXRACFQgIbIICMMCqAGN5bGvG7EQMcEw7uX843Hjo7NAY0mtOjJzOLCw1hNVEAIAbYoK7QCKEaSOVqpHJvMBwuDo+u1k+vl5wDqsO1yqCTZ6iPwQIUJJVm4nS+S+ENATS0Dc/kMBS/jY8oJpwCSp0nxe0ZiBXsYGQrCHL+IRbJWsKkYuiH4RkStcUrxCUXO5Tnl6HQrClne1UjMwOU4gwWy/Si0IR39yCtFhwAju4id7O5BU1bMvdZRZ91ZO2TJMvoFU7NRBWgvsLYn2LMKkGTooksy95RTVK6aZCCLwXHTcFqt0fdqBr6C99F23j8x99mLs7Fn8+/ojoaHKHsAAAAAElFTkSuQmCC"
                            />
                        </button>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
</body>
</html>